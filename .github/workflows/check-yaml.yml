on:
  pull_request:
    paths:
      - '**/action.yml'
      - '**/action.yaml'
      - '**/.github/workflows/*.yml'
      - '**/.github/workflows/*.yaml'

name: Check YAML

jobs:
  check-yaml:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      # TODO: switch to mainline once https://github.com/nwisbeta/validate-yaml-schema/pull/21 is merged
      - uses: galargh/validate-yaml-schema@c8060d4a389d0eec986a90665bf0c496bf1f52e8
        with:
          yamlSchemasJson: |
            {
              "https://json.schemastore.org/github-action.json": ["**/action.yml", "**/action.yaml"],
              "https://json.schemastore.org/github-workflow.json": ["**/.github/workflows/*.yml", "**/.github/workflows/*.yaml"]
            }
